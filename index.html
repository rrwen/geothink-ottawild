<!DOCTYPE html>
<html>

  <head>
    <title>Ottawild</title>
	
	<!-- Metadata -->
	<meta name="application-name" content="Ottawild Prototype" />
	<meta name="author" content="Richard Wen @ Ryerson University" />
	<meta name="description" content="Prototype for Ottawild Map" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="js/leaflet/leaflet.css" />
	<link rel="stylesheet" href="js/leaflet.draw/dist/leaflet.draw.css"></script>
	<link rel="stylesheet" href="js/leaflet.search/src/leaflet-search.css" />
	<link rel="stylesheet" href="js/leaflet.sidebar/src/L.Control.Sidebar.css" />
	<link rel="stylesheet" type="text/css" href="js/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="js/leaflet.easybutton/src/easy-button.css">
	<link rel="stylesheet" href="css/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="js/leaflet.fullscreen/Control.FullScreen.css" />
	
	<!-- Initial Style -->
    <style>
		html, body {
			height: 96%;
			padding: 0;
			margin: 0;
		}
		#map { height: 102.25%;}
	
		#top {
			width: 100%;
			height: 6%;
			background: black;
			margin: 0 0 0 0;
			padding: 0.75%;
			font-size: 150%;
			color: white;
		}
		
		#sidebar, #profile {
			width: 293%;
		}
		
		.intro > .modal-dialog{
			width:85% !important;
		}
		
		.button{
			color: white;
			background: black;
		}
		
		 .button:hover {
			background-color: gray;
			color: white;
		}
		
		.search-input, .leaflet-control-search {
			max-width:400px;
			width: 400px
		}

		#primary_nav_wrap ul
		{
			list-style:none;
			position:absolute;
			float:left;
			margin:0;
			padding:0;
			z-index:1;
		}

		#primary_nav_wrap ul a
		{
			display:block;
			color:white;
			text-decoration:none;
			font-weight:700;
			font-size:12px;
			line-height:32px;
			padding:0 15px;
			font-family:"HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif
		}

		#primary_nav_wrap ul li
		{
			position:relative;
			float:left;
			margin:0;
			padding:0;
		}

		#primary_nav_wrap ul li.current-menu-item
		{
			background:black
		}

		#primary_nav_wrap ul li:hover
		{
			background:gray;
		}

		#primary_nav_wrap ul ul
		{
			display:none;
			position:absolute;
			top:100%;
			left:0;
			background:white;
			color: black;
			padding:10px;
			font-size: 80%;
			width: 700%;
		}

		#primary_nav_wrap ul ul li
		{
			float:none;
			width:200px;
		}

		#primary_nav_wrap ul ul a
		{
			line-height:120%;
			padding:10px 15px
		}

		#primary_nav_wrap ul ul ul
		{
			top:0;
			left:100%
		}

		#primary_nav_wrap ul li:hover > ul
		{
			display:block
		}
		
    </style>
	
  </head>
  
  <!-- Main -->
  <body>
	<div id="top">
		<nav id="primary_nav_wrap">
		<ul>
		<li style="background:none">Ottawild&nbsp</li>
		  <li><a href="#">About</a>
			<ul>
			  The purpose of Ottawild is to increase awareness of the City’s natural areas among residents and visitors to make nature a part of Ottawa’s identity and positive reputation.
			</ul>
		  </li>
		  <li><a href="#">Partners</a>
			<ul>
				• City Councillors
				<br>• Ottawa 2017
				<br>• Parks, Recreation & Cultural Services Department
				<br>• Ottawa Public Health
				<br>• Economic Development and Innovation
				<br>• Forestry Services, Public Works Department
				<br>• Neighbourhood Connection Office
				<br>• Transportation Planning, Planning and Growth Management 
				<br>• Cleaning the Capital
				<br>• Rural Affairs Office
				<br>• Grants Programs
			</ul>
		  </li>
		  <li><a href="#">Collaborators</a>
			<ul>
				• Public partners, federal agencies and departments
				<br>• Tourism Sector
				<br>• Canadian Museum of Nature
				<br>• Universities and Colleges Environmental Programs
				<br>• School Boards
				<br>• Canadian Organizations
				<br>• Outdoor Enthusiasts
				<br>• Community organizations
			</ul>
		  </li>
		  <li><a href="#">Contact</a>
			<ul>
			  <b>Ottawild</b>
			  <br>100 Anywhere Street East
			  <br>Ottawa, ON, K1P 1J1
			  <br>Email: ottawild@mail.ca
			  <br>Phone: (000)000-0000
			  <br>Fax: (000)000-0000
			</ul>
		  </li>
		</ul>
		</nav>
	</div>
	<div id="map"></div>
	<div id="sidebar"><img onclick="chgexp()" src="images/experiences1.jpg" style="width:99.5%;height:99%;"></div>
	<div id="profile"><img src="images/profile.jpg" style="width:90%;height:99%;"></div>
	
	<!-- Libraries -->
	<script src="data/parks.json" type="text/javascript"></script>
	<script src="js/leaflet/leaflet.js"></script><!-- leaflet.js -->
	<script src="js/leaflet.draw/dist/leaflet.draw.js"></script><!-- leaflet.draw.js -->
	<script src="js/leaflet.search/src/leaflet-search.js"></script> <!-- leaflet.search.js -->
	<script src="js/leaflet.sidebar/src/L.Control.Sidebar.js"></script> <!-- leaflet.sidebar.js -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> <!-- jquery.js -->
	<script src="js/bootbox/bootbox.min.js" type="text/javascript"></script>
	<script src="js/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="js/leaflet.easybutton/src/easy-button.js"></script>
	<script src="js/leaflet.fullscreen/Control.FullScreen.js"></script>
	
	<script>
		
		// 1.1 Create Leaflet map
		var map = L.map('map').setView([45.4214, -75.6919], 13);

		// 1.2 Pull OSM tiles and add to Leaflet map
		L.tileLayer(
			'http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',
			{attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
			maxZoom: 17}
		).addTo(map);
		
		// 1.3 Add Sidebar Panel
		var sidebar = L.control.sidebar('sidebar', {
            closeButton: true,
            position: 'left'
        });
        map.addControl(sidebar);
		// For demonstration purposes
		function chgexp(){
			sidebar.setContent('<img onclick="chgexp2()" src="images/experiences2.jpg" style="width:99.5%;height:99%;">');
		};
		function chgexp2(){
			sidebar.setContent('<img onclick="chgexp()" src="images/experiences1.jpg" style="width:99.5%;height:99%;">');
		};
		
		// 1.4 Add data
		L.geoJson(parks,{
			style: {
			"color": "green",
			"weight":3,
			"opacity":0.9}
		}).addTo(map).on('click',function (e) {
            sidebar.show();
			map.closePopup();
        });
		
		// 1.4.1 Add full screen
		L.control.fullscreen({
		  position: 'topleft'
		}).addTo(map);
		
		// 1.5 Add Profile
		var profile = L.control.sidebar('profile', {
            closeButton: true,
            position: 'left'
        });
        map.addControl(profile);
		
	    L.easyButton({
		  position: 'topleft',      // inherited from L.Control -- the corner it goes in
		  type: 'replace',
		  leafletClasses: true,     // use leaflet classes to style the button?
		  states:[{                 // specify different icons and responses for your button
			stateName: 'profile',
			onClick: function(button, map){
			  profile.show();
			},
			icon: 'fa-user'
		  }]
		}).addTo(map);
		
		map.on('click', function () {
            sidebar.hide();
			profile.hide();
        });
		
		// 1.6 Add search control
		map.addControl(new L.Control.Search({
			url: 'http://nominatim.openstreetmap.org/search?format=json&q={s}',
			jsonpParam: 'json_callback',
			propertyName: 'display_name',
			propertyLoc: ['lat','lon'],
			circleLocation: true,
			markerLocation: true,			
			autoType: false,
			autoCollapse: true,
			minLength: 2,
			zoom: 15,
			position: 'topright'
		}));
		
		// 2. Initial Bootbox
		bootbox.dialog({
		  message: '<img src="images/intro.jpg" style="width:95%;">',
		  className: "intro",
		  buttons: {
			enter: {
			  label: "Enter",
			  className: "button",
			  callback: function() {
			  }
			},
			login: {
			  label: "Login",
			  className: "button",
			  callback: function() {
			  }
			},
			signup: {
			  label: "Sign Up",
			  className: "button",
			  callback: function() {
			  }
			}
		  }
		});
		
		// 3.1 Initial Popup
		var helpPopup = L.popup()
		helpPopup.setContent('Click on any green area to start your experience!').setLatLng(map.getCenter()).openOn(map);
		
    </script>
	
  </body>
</html>
